"""For sys.exit"""
import sys
import requests
from bs4 import BeautifulSoup
from cookie import get_cookie #cookie is very long varibale can eat up a lot of space


cookies=get_cookie()
check_lst = []
headers={'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36'}


for i in range(50):
    drinks=[
        f"/nl/Bier/c/BEDR307000000000000?q=%3Aname-asc&page={i}",#BEER
        f"/nl/Aperitieven-%26-sterke-drank/c/BEDR308000000000000?q=%3Aname-asc&page={i}", #APERITIEVEN
        f"/nl/Wijnen/c/BEDR309000000000000?q=%3Aname-asc&page={i}", #WINE
        f"/nl/Schuimwijnen-%26-champagnes/c/BEDR310000000000000?q=%3Aname-asc&page={i}" #CHAMPAGNES
        ]
        
    url = "https://drive.carrefour.be"+drinks[3] #Note change the file name
    resp = requests.get(url, headers=headers,cookies=cookies)
    soup = BeautifulSoup(resp.content, "lxml")
    product_grid = soup.find_all("div", {"class":
                                         "product__listing product__grid"})
    a_tag_list = product_grid[0].find_all("a")
   # print(len(a_tag_list))
    if len(a_tag_list) == 0:
        print("Done....")
        sys.exit(0)
    for items in a_tag_list:
        final_url = f"https://drive.carrefour.be{items['href']}\n"
        if final_url not in check_lst:
            check_lst.append(final_url)
            with open("champanges.txt", "a", encoding="utf8") as f:
                f.write(final_url)
    print(f"Page {i} completed.....")
    print(f"Total Products: {len(check_lst)}")
